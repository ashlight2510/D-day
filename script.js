const translations = {
    ko: {
        metaTitle: 'D-day ê³„ì‚°ê¸° | ë””ë°ì´ ë‚ ì§œ ê³„ì‚°ê¸° - ëª©í‘œì¼ê¹Œì§€ ë¬´ë£Œ ê³„ì‚°',
        metaDescription:
            'ë¬´ë£Œ D-day ê³„ì‚°ê¸°ë¡œ ëª©í‘œì¼ê¹Œì§€ ë©°ì¹  ë‚¨ì•˜ëŠ”ì§€ ì‰½ê³  ë¹ ë¥´ê²Œ ê³„ì‚°í•˜ì„¸ìš”. ìƒì¼, ê¸°ë…ì¼, ì‹œí—˜ì¼, í”„ë¡œì íŠ¸ ë§ˆê°ì¼ ë“± ëª¨ë“  ì¤‘ìš”í•œ ë‚ ì§œë¥¼ ê´€ë¦¬í•˜ê³  ì¹´ìš´íŠ¸ë‹¤ìš´í•˜ì„¸ìš”.',
        metaKeywords:
            'D-day, ë””ë°ì´, ë‚ ì§œê³„ì‚°, ì¹´ìš´íŠ¸ë‹¤ìš´, ê¸°ë…ì¼, ìƒì¼, ì‹œí—˜ì¼, ë””ë°ì´ ê³„ì‚°ê¸°, ë‚ ì§œ ê³„ì‚°ê¸°, ëª©í‘œì¼, ë‚¨ì€ ë‚ ì§œ',
        metaOgTitle:
            'D-day ê³„ì‚°ê¸° | ë””ë°ì´ ë‚ ì§œ ê³„ì‚°ê¸° - ë¬´ë£Œë¡œ ëª©í‘œì¼ê¹Œì§€ ë©°ì¹  ë‚¨ì•˜ëŠ”ì§€ ê³„ì‚°',
        metaOgDescription:
            'ë¬´ë£Œ D-day ê³„ì‚°ê¸°ë¡œ ëª©í‘œì¼ê¹Œì§€ ë©°ì¹  ë‚¨ì•˜ëŠ”ì§€ ì‰½ê³  ë¹ ë¥´ê²Œ ê³„ì‚°í•˜ì„¸ìš”. ìƒì¼, ê¸°ë…ì¼, ì‹œí—˜ì¼ ë“± ëª¨ë“  ì¤‘ìš”í•œ ë‚ ì§œë¥¼ ê´€ë¦¬í•˜ì„¸ìš”.',
        metaTwitterTitle: 'D-day ê³„ì‚°ê¸° | ë””ë°ì´ ë‚ ì§œ ê³„ì‚°ê¸°',
        metaTwitterDescription:
            'ë¬´ë£Œ D-day ê³„ì‚°ê¸°ë¡œ ëª©í‘œì¼ê¹Œì§€ ë©°ì¹  ë‚¨ì•˜ëŠ”ì§€ ì‰½ê³  ë¹ ë¥´ê²Œ ê³„ì‚°í•˜ì„¸ìš”.',
        ogSiteName: 'D-day ê³„ì‚°ê¸°',
        ogLocale: 'ko_KR',
        ogImageAlt: 'D-day Countdown Calculator',
        metaLanguage: 'Korean',
        navHome: 'í™ˆ',
        navTools: 'ë„êµ¬',
        navContent: 'ì½˜í…ì¸ ',
        navAbout: 'ì†Œê°œ',
        navContact: 'ë¬¸ì˜',
        heroTitle: 'ğŸ“… D-day ê³„ì‚°ê¸°',
        heroSubtitle: 'ëª©í‘œì¼ê¹Œì§€ ë©°ì¹  ë‚¨ì•˜ëŠ”ì§€ ì‰½ê³  ë¹ ë¥´ê²Œ ê³„ì‚°í•˜ì„¸ìš”',
        themePurple: 'ë³´ë¼ìƒ‰ í…Œë§ˆ',
        themeBlue: 'íŒŒë€ìƒ‰ í…Œë§ˆ',
        themeGreen: 'ì´ˆë¡ìƒ‰ í…Œë§ˆ',
        themePink: 'í•‘í¬ í…Œë§ˆ',
        themeOrange: 'ì˜¤ë Œì§€ í…Œë§ˆ',
        introTitle: 'D-day ê³„ì‚°ê¸°ë¡œ ëª©í‘œì¼ì„ ê´€ë¦¬í•˜ì„¸ìš”',
        introDesc1:
            'ìƒì¼, ê¸°ë…ì¼, ì‹œí—˜ì¼, í”„ë¡œì íŠ¸ ë§ˆê°ì¼ ë“± ëª¨ë“  ì¤‘ìš”í•œ ë‚ ì§œë¥¼ ì‰½ê³  ë¹ ë¥´ê²Œ ê³„ì‚°í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ë¬´ë£Œ ì›¹ ë„êµ¬ì…ë‹ˆë‹¤. ë³µì¡í•œ ì„¤ì¹˜ë‚˜ íšŒì›ê°€ì… ì—†ì´ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°, ëª¨ë“  ê¸°ëŠ¥ì„ ì™„ì „ ë¬´ë£Œë¡œ ì œê³µí•©ë‹ˆë‹¤.',
        introDesc2:
            'D-day ê³„ì‚°ê¸°ëŠ” ë‹¨ìˆœíˆ ë‚ ì§œë¥¼ ê³„ì‚°í•˜ëŠ” ê²ƒì„ ë„˜ì–´, ëª©í‘œë¥¼ í–¥í•œ ì—¬ì •ì„ í•¨ê»˜í•©ë‹ˆë‹¤. ì‹¤ì‹œê°„ ì¹´ìš´íŠ¸ë‹¤ìš´, ìƒì„¸í•œ ì‹œê°„ í‘œì‹œ, ì•Œë¦¼ ê¸°ëŠ¥, ë©”ëª¨ ì‘ì„± ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ í†µí•´ ì¤‘ìš”í•œ ë‚ ì§œë¥¼ ë†“ì¹˜ì§€ ì•Šê³  ì¤€ë¹„í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ë“œë¦½ë‹ˆë‹¤.',
        introCard1Title: 'âœ… ì™„ì „ ë¬´ë£Œ',
        introCard1Desc:
            'íšŒì›ê°€ì…ì´ë‚˜ ê²°ì œ ì—†ì´ ëª¨ë“  ê¸°ëŠ¥ì„ ë¬´ë£Œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
        introCard2Title: 'ğŸ”’ í”„ë¼ì´ë²„ì‹œ ë³´í˜¸',
        introCard2Desc:
            'ëª¨ë“  ë°ì´í„°ëŠ” ë¸Œë¼ìš°ì €ì—ë§Œ ì €ì¥ë˜ë©° ì„œë²„ë¡œ ì „ì†¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.',
        introCard3Title: 'ğŸ“± ëª¨ë“  ê¸°ê¸° ì§€ì›',
        introCard3Desc:
            'ìŠ¤ë§ˆíŠ¸í°, íƒœë¸”ë¦¿, PC ë“± ëª¨ë“  ê¸°ê¸°ì—ì„œ ìµœì í™”ëœ í™”ë©´ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.',
        ddayTitle: 'ğŸ¯ ëª©í‘œì¼ê¹Œì§€ ë©°ì¹  ë‚¨ì•˜ë‚˜ìš”?',
        ddayTargetLabel: 'ëª©í‘œ ë‚ ì§œ',
        ddayCalculate: 'ê³„ì‚°í•˜ê¸°',
        futureTitle: 'ğŸ“† Nì¼ í›„ëŠ” ì–¸ì œì¸ê°€ìš”?',
        futureDaysLabel: 'ë©°ì¹  í›„',
        futureDaysPlaceholder: 'ì¼ ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”',
        futureStartLabel: 'ì‹œì‘ ë‚ ì§œ',
        futureCalculate: 'ê³„ì‚°í•˜ê¸°',
        quickTitle: 'âš¡ ë¹ ë¥¸ ê³„ì‚°',
        quick50: '50ì¼ í›„',
        quick100: '100ì¼ í›„',
        quick200: '200ì¼ í›„',
        quick300: '300ì¼ í›„',
        memoTitle: 'âœï¸ ë©”ëª¨ / ê°ì˜¤ ì‘ì„±',
        memoLabel: 'ì˜¤ëŠ˜ì˜ ê°ì˜¤ë‚˜ ë©”ëª¨ë¥¼ ë‚¨ê²¨ë³´ì„¸ìš”',
        memoPlaceholder: 'ì˜ˆ: ì‹œí—˜ê¹Œì§€ 79ì¼ ë‚¨ì•˜ë‹¤. ì˜¤ëŠ˜ì€ 2ì‹œê°„ ê³µë¶€í–ˆë‹¤',
        memoSave: 'ì €ì¥í•˜ê¸°',
        memoLoad: 'ì €ì¥ëœ ë©”ëª¨ ë³´ê¸°',
        widgetTitle: 'ğŸ”— ë¸”ë¡œê·¸ìš© ìœ„ì ¯ ì½”ë“œ ìƒì„±',
        widgetDesc: 'ë¸”ë¡œê·¸ë‚˜ ì¹´í˜ì— D-day ìœ„ì ¯ì„ ë¶™ì—¬ë³´ì„¸ìš”!',
        widgetDateLabel: 'ìœ„ì ¯ì— í‘œì‹œí•  ë‚ ì§œ',
        widgetTitleLabel: 'ìœ„ì ¯ ì œëª©',
        widgetTitlePlaceholder: 'ì˜ˆ: ì‹œí—˜ì¼ê¹Œì§€',
        widgetGenerate: 'ìœ„ì ¯ ì½”ë“œ ìƒì„±',
        faqTitle: 'â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ (FAQ)',
        faq1Question: 'Q. D-day ê³„ì‚°ê¸°ëŠ” ë¬´ë£Œì¸ê°€ìš”?',
        faq1Answer:
            'A. ë„¤, ì™„ì „ ë¬´ë£Œì…ë‹ˆë‹¤. íšŒì›ê°€ì…ì´ë‚˜ ì„¤ì¹˜ ì—†ì´ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª¨ë“  ê¸°ëŠ¥ì„ ë¬´ë£Œë¡œ ì´ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
        faq2Question: 'Q. ì…ë ¥í•œ ë‚ ì§œì™€ ë©”ëª¨ëŠ” ì–´ë””ì— ì €ì¥ë˜ë‚˜ìš”?',
        faq2Answer:
            'A. ëª¨ë“  ë°ì´í„°ëŠ” ì‚¬ìš©ìì˜ ë¸Œë¼ìš°ì € ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ë§Œ ì €ì¥ë©ë‹ˆë‹¤. ì„œë²„ë¡œ ì „ì†¡ë˜ì§€ ì•Šìœ¼ë©°, ë‹¤ë¥¸ ì‚¬ëŒì´ ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ìºì‹œë¥¼ ì‚­ì œí•˜ë©´ ì €ì¥ëœ ë°ì´í„°ë„ í•¨ê»˜ ì‚­ì œë©ë‹ˆë‹¤.',
        faq3Question: 'Q. ëª¨ë°”ì¼ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‚˜ìš”?',
        faq3Answer:
            'A. ë„¤, ë°˜ì‘í˜• ë””ìì¸ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆì–´ ìŠ¤ë§ˆíŠ¸í°, íƒœë¸”ë¦¿, ë°ìŠ¤í¬í†± ë“± ëª¨ë“  ê¸°ê¸°ì—ì„œ ìµœì í™”ëœ í™”ë©´ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª¨ë°”ì¼ ë¸Œë¼ìš°ì €ì—ì„œë„ ëª¨ë“  ê¸°ëŠ¥ì„ ì •ìƒì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
        faq4Question: 'Q. ìœ„ì ¯ ì½”ë“œë¥¼ ë¸”ë¡œê·¸ì— ì‚¬ìš©í•´ë„ ë˜ë‚˜ìš”?',
        faq4Answer:
            'A. ë„¤, ììœ ë¡­ê²Œ ì‚¬ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°œì¸ ë¸”ë¡œê·¸, ì¹´í˜, ì›¹ì‚¬ì´íŠ¸ ë“± ì–´ë””ì—ë“  ìœ„ì ¯ ì½”ë“œë¥¼ ì‚½ì…í•˜ì—¬ ì‚¬ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìƒì—…ì  ëª©ì ì˜ ì‚¬ìš©ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.',
        faq5Question: 'Q. ì•Œë¦¼ ê¸°ëŠ¥ì´ ì‘ë™í•˜ì§€ ì•Šì•„ìš”',
        faq5Answer:
            'A. ì•Œë¦¼ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ ë¸Œë¼ìš°ì €ì—ì„œ ì•Œë¦¼ ê¶Œí•œì„ í—ˆìš©í•´ì•¼ í•©ë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ ì•Œë¦¼ ê¶Œí•œì„ í™•ì¸í•´ ì£¼ì„¸ìš”. ë˜í•œ ì¼ë¶€ ë¸Œë¼ìš°ì €ë‚˜ ëª¨ë°”ì¼ í™˜ê²½ì—ì„œëŠ” ì•Œë¦¼ì´ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
        faq6Question: 'Q. D-day ê³„ì‚°ì€ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?',
        faq6Answer:
            'A. ëª©í‘œ ë‚ ì§œë¥¼ ì„ íƒí•˜ê³  "ê³„ì‚°í•˜ê¸°" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ë©ë‹ˆë‹¤. ì˜¤ëŠ˜ë¶€í„° ëª©í‘œì¼ê¹Œì§€ ë©°ì¹  ë‚¨ì•˜ëŠ”ì§€ ìë™ìœ¼ë¡œ ê³„ì‚°ë˜ë©°, ì¼, ì‹œê°„, ë¶„, ì´ˆ ë‹¨ìœ„ë¡œ ìƒì„¸í•˜ê²Œ í‘œì‹œë©ë‹ˆë‹¤.',
        faqMore: 'ë” ë§ì€ ì§ˆë¬¸ì´ ìˆìœ¼ì‹ ê°€ìš”?',
        faqContact: 'ë¬¸ì˜í•˜ê¸°',
        footerCopyright: 'Â© 2025',
        footerRights: 'All rights reserved.',
        footerHome: 'í™ˆ',
        footerAbout: 'ì†Œê°œ',
        footerPrivacy: 'ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨',
        footerTerms: 'ì´ìš©ì•½ê´€',
        footerContact: 'ë¬¸ì˜',
        footerSitemap: 'ì‚¬ì´íŠ¸ë§µ',
        alertSelectTarget: 'ëª©í‘œ ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.',
        alertInvalidDays: 'ì˜¬ë°”ë¥¸ ì¼ ìˆ˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.',
        alertMemoEmpty: 'ë©”ëª¨ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.',
        alertMemoSaved: 'ë©”ëª¨ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!',
        alertMemoEmptyList: 'ì €ì¥ëœ ë©”ëª¨ê°€ ì—†ìŠµë‹ˆë‹¤.',
        alertMemoDeleteConfirm: 'ì´ ë©”ëª¨ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
        alertSelectDate: 'ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.',
        alertWidgetCopied: 'ì½”ë“œê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!',
        alertShareImageDownload: 'ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí–ˆìŠµë‹ˆë‹¤. ì¹´ì¹´ì˜¤í†¡ì—ì„œ ê³µìœ í•´ì£¼ì„¸ìš”!',
        alertImageDownload: 'ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí–ˆìŠµë‹ˆë‹¤.',
        alertImageDownloadInsta:
            'ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí–ˆìŠµë‹ˆë‹¤. ì¸ìŠ¤íƒ€ê·¸ë¨ ì•±ì—ì„œ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”!',
        alertImageGenerateFail: 'ì´ë¯¸ì§€ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',
        alertImageGenerateError: 'ì´ë¯¸ì§€ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',
        alertImageCopySuccess: 'ì´ë¯¸ì§€ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!',
        alertImageCopyFail: 'í´ë¦½ë³´ë“œ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí–ˆìŠµë‹ˆë‹¤.',
        alertClipboardUnsupported:
            'ì´ ë¸Œë¼ìš°ì €ëŠ” í´ë¦½ë³´ë“œ ë³µì‚¬ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí–ˆìŠµë‹ˆë‹¤.',
        alertImageCopyError: 'ì´ë¯¸ì§€ ë³µì‚¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',
        alertImageDataFail: 'ì´ë¯¸ì§€ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.',
        alertImageDownloadError: 'ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.',
        shareKakaoTitle: 'D-day ê³„ì‚°ê¸°',
        shareMemoTitle: 'ğŸ“ D-day ë©”ëª¨',
        shareKakaoText: '{date}ê¹Œì§€ D-{days}',
        shareKakaoFutureText:
            '{startDate}ë¡œë¶€í„° {days}ì¼ í›„ëŠ” {futureDate}ì…ë‹ˆë‹¤!',
        shareImageCopied: 'ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí–ˆìŠµë‹ˆë‹¤. ì¹´ì¹´ì˜¤í†¡ì—ì„œ ê³µìœ í•´ì£¼ì„¸ìš”!',
        shareCopyFallback: 'í´ë¦½ë³´ë“œ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí–ˆìŠµë‹ˆë‹¤.',
        shareTitleDefault: 'D-day',
        unitDay: 'ì¼',
        unitHour: 'ì‹œê°„',
        unitMinute: 'ë¶„',
        unitSecond: 'ì´ˆ',
        ddayTodayTitle: 'ğŸ‰ ì˜¤ëŠ˜ì´ ë°”ë¡œ ëª©í‘œì¼ì…ë‹ˆë‹¤!',
        ddayTodayText: 'ì¶•í•˜í•©ë‹ˆë‹¤! ì˜¤ëŠ˜ì´ ë°”ë¡œ ê·¸ ë‚ ì…ë‹ˆë‹¤! ğŸŠ',
        ddayArrivedTitle: 'ğŸ‰ ëª©í‘œì¼ì´ ë„ì°©í–ˆìŠµë‹ˆë‹¤!',
        ddayArrivedText: 'ì¶•í•˜í•©ë‹ˆë‹¤! ëª©í‘œì¼ì´ ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸŠ',
        ddayTargetTitle: 'ğŸ“… ëª©í‘œì¼',
        ddayUntilText: '{date}ê¹Œì§€ ë‚¨ì•˜ìŠµë‹ˆë‹¤.',
        ddayPastText: '{date}ë¡œë¶€í„° {days}ì¼ ì§€ë‚¬ìŠµë‹ˆë‹¤.',
        futureResultTitle: 'ğŸ“† {days}ì¼ í›„',
        futureResultText: '{startDate}ë¡œë¶€í„° {days}ì¼ í›„ì…ë‹ˆë‹¤.',
        quickResultTitle: 'âš¡ {period}',
        shareKakaoBtn: 'ğŸ’¬ ì¹´ì¹´ì˜¤í†¡ ê³µìœ ',
        shareInstagramBtn: 'ğŸ“· ì¸ìŠ¤íƒ€ê·¸ë¨ ê³µìœ ',
        shareCopyBtn: 'ğŸ“‹ ì´ë¯¸ì§€ ë³µì‚¬',
        memoShareKakao: 'ğŸ’¬ ì¹´í†¡ ê³µìœ ',
        memoShareInsta: 'ğŸ“· ì¸ìŠ¤íƒ€ ê³µìœ ',
        memoShareCopy: 'ğŸ“‹ ì´ë¯¸ì§€ ë³µì‚¬',
        memoDelete: 'ì‚­ì œ',
        widgetPreviewTitle: 'ìœ„ì ¯ ë¯¸ë¦¬ë³´ê¸°',
        widgetCodeTitle: 'HTML ì½”ë“œ',
        widgetCopyBtn: 'ì½”ë“œ ë³µì‚¬',
        widgetPreviewLabel: '{title}ê¹Œì§€',
        notificationTitle: 'D-day ì•Œë¦¼',
        notification100: '{date}ê¹Œì§€ 100ì¼ ë‚¨ì•˜ìŠµë‹ˆë‹¤!',
        notification30: '{date}ê¹Œì§€ 30ì¼ ë‚¨ì•˜ìŠµë‹ˆë‹¤!',
        notification7: '{date}ê¹Œì§€ 7ì¼ ë‚¨ì•˜ìŠµë‹ˆë‹¤!',
        dailyQuotes: [
            'ì˜¤ëŠ˜ë„ ëª©í‘œë¥¼ í–¥í•´ í•œ ê±¸ìŒì”©! ğŸ’ª',
            'ì‘ì€ ì‹œì‘ì´ í° ë³€í™”ë¥¼ ë§Œë“­ë‹ˆë‹¤ âœ¨',
            'ì‹œê°„ì€ ê¸ˆì´ë‹¤. ì†Œì¤‘í•˜ê²Œ ì‚¬ìš©í•˜ì„¸ìš” â°',
            'ì˜¤ëŠ˜ì´ ë°”ë¡œ ì‹œì‘í•˜ëŠ” ë‚ ì…ë‹ˆë‹¤! ğŸŒŸ',
            'ëª©í‘œë¥¼ í–¥í•œ ì—¬ì •, ì˜¤ëŠ˜ë„ í™”ì´íŒ…! ğŸš€',
            'í•˜ë£¨í•˜ë£¨ê°€ ì†Œì¤‘í•œ ì‹œê°„ì…ë‹ˆë‹¤ ğŸ“…',
            'ê¿ˆì„ í–¥í•´ ë‹¬ë ¤ê°€ëŠ” ì˜¤ëŠ˜ì´ ë˜ê¸¸ ğŸŒˆ'
        ]
    },
    en: {
        metaTitle: 'D-day Calculator | Countdown to Your Goal',
        metaDescription:
            'Free D-day calculator to count days until your goal. Track birthdays, anniversaries, exams, deadlines, and more with real-time countdowns and notes.',
        metaKeywords:
            'D-day, countdown, date calculator, anniversary, birthday, exam, deadline, days remaining, countdown tool',
        metaOgTitle: 'D-day Calculator | Countdown to Your Goal',
        metaOgDescription:
            'Free D-day calculator to count days until your goal. Track birthdays, anniversaries, exams, and important dates.',
        metaTwitterTitle: 'D-day Calculator | Countdown',
        metaTwitterDescription:
            'Free D-day calculator to count days until your goal.',
        ogSiteName: 'D-day Calculator',
        ogLocale: 'en_US',
        ogImageAlt: 'D-day Countdown Calculator',
        metaLanguage: 'English',
        navHome: 'Home',
        navTools: 'Tools',
        navContent: 'Content',
        navAbout: 'About',
        navContact: 'Contact',
        heroTitle: 'ğŸ“… D-day Calculator',
        heroSubtitle: 'Quickly calculate how many days remain until your goal',
        themePurple: 'Purple theme',
        themeBlue: 'Blue theme',
        themeGreen: 'Green theme',
        themePink: 'Pink theme',
        themeOrange: 'Orange theme',
        introTitle: 'Manage your target dates with a D-day calculator',
        introDesc1:
            'A free web tool to easily calculate and manage important dates like birthdays, anniversaries, exams, and project deadlines. No installation or signup required.',
        introDesc2:
            'D-day Calculator goes beyond counting days. Real-time countdowns, detailed time display, reminders, and notes help you stay ready for what matters.',
        introCard1Title: 'âœ… Completely free',
        introCard1Desc: 'All features are available at no cost, no signup needed.',
        introCard2Title: 'ğŸ”’ Privacy first',
        introCard2Desc: 'All data stays in your browser and is never sent to a server.',
        introCard3Title: 'ğŸ“± Works on all devices',
        introCard3Desc: 'Optimized for phones, tablets, and desktops.',
        ddayTitle: 'ğŸ¯ How many days until your goal?',
        ddayTargetLabel: 'Target date',
        ddayCalculate: 'Calculate',
        futureTitle: 'ğŸ“† What date is N days from now?',
        futureDaysLabel: 'Days after',
        futureDaysPlaceholder: 'Enter number of days',
        futureStartLabel: 'Start date',
        futureCalculate: 'Calculate',
        quickTitle: 'âš¡ Quick calc',
        quick50: 'In 50 days',
        quick100: 'In 100 days',
        quick200: 'In 200 days',
        quick300: 'In 300 days',
        memoTitle: 'âœï¸ Notes / Commitment',
        memoLabel: 'Leave a note or daily commitment',
        memoPlaceholder: 'e.g., 79 days to the exam. Studied 2 hours today.',
        memoSave: 'Save',
        memoLoad: 'View saved notes',
        widgetTitle: 'ğŸ”— Widget code for blogs',
        widgetDesc: 'Add a D-day widget to your blog or cafe!',
        widgetDateLabel: 'Date to display',
        widgetTitleLabel: 'Widget title',
        widgetTitlePlaceholder: 'e.g., Until exam day',
        widgetGenerate: 'Generate widget code',
        faqTitle: 'â“ Frequently Asked Questions',
        faq1Question: 'Q. Is the D-day calculator free?',
        faq1Answer:
            'A. Yes, it is completely free. Use it instantly without signup or installation.',
        faq2Question: 'Q. Where are my dates and notes saved?',
        faq2Answer:
            'A. All data is stored only in your browser local storage and is never sent to a server. Clearing your browser cache will remove saved data.',
        faq3Question: 'Q. Can I use it on mobile?',
        faq3Answer:
            'A. Yes. It is fully responsive and works on phones, tablets, and desktops.',
        faq4Question: 'Q. Can I use the widget code on my blog?',
        faq4Answer:
            'A. Yes, feel free to embed it on blogs, cafes, or websites. Commercial use is allowed.',
        faq5Question: 'Q. Notifications do not work',
        faq5Answer:
            'A. Please allow notification permissions in your browser settings. Some browsers or mobile environments may restrict notifications.',
        faq6Question: 'Q. How do I calculate D-day?',
        faq6Answer:
            'A. Select a target date and click "Calculate". The app will show days remaining along with hours, minutes, and seconds.',
        faqMore: 'Have more questions?',
        faqContact: 'Contact us',
        footerCopyright: 'Â© 2025',
        footerRights: 'All rights reserved.',
        footerHome: 'Home',
        footerAbout: 'About',
        footerPrivacy: 'Privacy Policy',
        footerTerms: 'Terms',
        footerContact: 'Contact',
        footerSitemap: 'Sitemap',
        alertSelectTarget: 'Please select a target date.',
        alertInvalidDays: 'Please enter a valid number of days.',
        alertMemoEmpty: 'Please enter a memo.',
        alertMemoSaved: 'Memo saved!',
        alertMemoEmptyList: 'No saved memos yet.',
        alertMemoDeleteConfirm: 'Delete this memo?',
        alertSelectDate: 'Please select a date.',
        alertWidgetCopied: 'Code copied to clipboard!',
        alertShareImageDownload: 'Image downloaded. Share it in KakaoTalk!',
        alertImageDownload: 'Image downloaded.',
        alertImageDownloadInsta: 'Image downloaded. Upload it on Instagram!',
        alertImageGenerateFail: 'Failed to generate image. Please try again.',
        alertImageGenerateError: 'Error generating image. Please try again.',
        alertImageCopySuccess: 'Image copied to clipboard!',
        alertImageCopyFail: 'Copy failed. Image downloaded instead.',
        alertClipboardUnsupported:
            'Clipboard copy is not supported. Image downloaded instead.',
        alertImageCopyError: 'Error copying image. Please try again.',
        alertImageDataFail: 'Failed to generate image.',
        alertImageDownloadError: 'Error downloading image.',
        shareKakaoTitle: 'D-day Calculator',
        shareMemoTitle: 'ğŸ“ D-day Memo',
        shareKakaoText: 'D-{days} until {date}',
        shareKakaoFutureText:
            '{futureDate} is {days} days after {startDate}!',
        shareImageCopied: 'Image downloaded. Share it in KakaoTalk!',
        shareCopyFallback: 'Copy failed. Image downloaded instead.',
        shareTitleDefault: 'D-day',
        unitDay: 'days',
        unitHour: 'hours',
        unitMinute: 'minutes',
        unitSecond: 'seconds',
        ddayTodayTitle: 'ğŸ‰ Today is the target day!',
        ddayTodayText: 'Congrats! Today is the day! ğŸŠ',
        ddayArrivedTitle: 'ğŸ‰ Your target day has arrived!',
        ddayArrivedText: 'Congrats! It is your target day! ğŸŠ',
        ddayTargetTitle: 'ğŸ“… Target date',
        ddayUntilText: 'Until {date}.',
        ddayPastText: 'It has been {days} days since {date}.',
        futureResultTitle: 'ğŸ“† {days} days later',
        futureResultText: '{futureDate} is {days} days after {startDate}.',
        quickResultTitle: 'âš¡ {period}',
        shareKakaoBtn: 'ğŸ’¬ Share to Kakao',
        shareInstagramBtn: 'ğŸ“· Share to Instagram',
        shareCopyBtn: 'ğŸ“‹ Copy image',
        memoShareKakao: 'ğŸ’¬ Share',
        memoShareInsta: 'ğŸ“· Instagram',
        memoShareCopy: 'ğŸ“‹ Copy image',
        memoDelete: 'Delete',
        widgetPreviewTitle: 'Widget preview',
        widgetCodeTitle: 'HTML code',
        widgetCopyBtn: 'Copy code',
        widgetPreviewLabel: 'Until {title}',
        notificationTitle: 'D-day alert',
        notification100: '{date} - 100 days left!',
        notification30: '{date} - 30 days left!',
        notification7: '{date} - 7 days left!',
        dailyQuotes: [
            'One step closer to your goal today! ğŸ’ª',
            'Small starts create big changes âœ¨',
            'Time is gold. Use it wisely â°',
            'Today is the day to begin! ğŸŒŸ',
            'Keep going toward your goal today! ğŸš€',
            'Every day is precious time ğŸ“…',
            'Wishing you a day that moves you toward your dream ğŸŒˆ'
        ]
    }
};

let currentLang = 'ko';

function t(key, vars = {}) {
    const langTable = translations[currentLang] || translations.ko;
    const template = langTable[key] ?? translations.ko[key] ?? key;
    if (typeof template !== 'string') return template;
    return template.replace(/\{(\w+)\}/g, (_, token) =>
        vars[token] !== undefined ? vars[token] : `{${token}}`
    );
}

function applyTranslations() {
    document.title = t('metaTitle');
    const desc = document.querySelector('meta[name="description"]');
    if (desc) desc.setAttribute('content', t('metaDescription'));
    const keywords = document.querySelector('meta[name="keywords"]');
    if (keywords) keywords.setAttribute('content', t('metaKeywords'));
    const ogTitle = document.querySelector('meta[property="og:title"]');
    if (ogTitle) ogTitle.setAttribute('content', t('metaOgTitle'));
    const ogDesc = document.querySelector('meta[property="og:description"]');
    if (ogDesc) ogDesc.setAttribute('content', t('metaOgDescription'));
    const ogSite = document.querySelector('meta[property="og:site_name"]');
    if (ogSite) ogSite.setAttribute('content', t('ogSiteName'));
    const ogLocale = document.querySelector('meta[property="og:locale"]');
    if (ogLocale) ogLocale.setAttribute('content', t('ogLocale'));
    const ogAlt = document.querySelector('meta[property="og:image:alt"]');
    if (ogAlt) ogAlt.setAttribute('content', t('ogImageAlt'));
    const twTitle = document.querySelector('meta[name="twitter:title"]');
    if (twTitle) twTitle.setAttribute('content', t('metaTwitterTitle'));
    const twDesc = document.querySelector('meta[name="twitter:description"]');
    if (twDesc) twDesc.setAttribute('content', t('metaTwitterDescription'));
    const langMeta = document.querySelector('meta[name="language"]');
    if (langMeta) langMeta.setAttribute('content', t('metaLanguage'));

    document.querySelectorAll('[data-i18n]').forEach((el) => {
        el.textContent = t(el.dataset.i18n);
    });
    document.querySelectorAll('[data-i18n-placeholder]').forEach((el) => {
        el.setAttribute('placeholder', t(el.dataset.i18nPlaceholder));
    });
    document.querySelectorAll('[data-i18n-title]').forEach((el) => {
        el.setAttribute('title', t(el.dataset.i18nTitle));
    });

    applyStructuredData();
}

function applyStructuredData() {
    const structured = document.getElementById('structured-data');
    if (structured) {
        const data = {
            '@context': 'https://schema.org',
            '@type': 'WebApplication',
            name: t('metaOgTitle'),
            description: t('metaOgDescription'),
            url: 'https://funnyfunny.cloud/',
            applicationCategory: 'UtilityApplication',
            operatingSystem: 'Any',
            offers: {
                '@type': 'Offer',
                price: '0',
                priceCurrency: 'KRW'
            },
            aggregateRating: {
                '@type': 'AggregateRating',
                ratingValue: '5',
                ratingCount: '1'
            },
            featureList: [
                currentLang === 'en' ? 'D-day countdown' : 'D-day ê³„ì‚°',
                currentLang === 'en' ? 'Reverse calculation' : 'ì—­ê³„ì‚° ê¸°ëŠ¥',
                currentLang === 'en' ? 'Quick calc' : 'ë¹ ë¥¸ ê³„ì‚°',
                currentLang === 'en' ? 'Memo notes' : 'ë©”ëª¨ ì‘ì„±',
                currentLang === 'en' ? 'Notifications' : 'ì•Œë¦¼ ê¸°ëŠ¥',
                currentLang === 'en' ? 'Share image' : 'ê³µìœ  ì´ë¯¸ì§€ ìƒì„±'
            ]
        };
        structured.textContent = JSON.stringify(data, null, 2);
    }

    const faq = document.getElementById('faq-ld');
    if (faq) {
        const faqData = {
            '@context': 'https://schema.org',
            '@type': 'FAQPage',
            mainEntity: [
                {
                    '@type': 'Question',
                    name: t('faq1Question'),
                    acceptedAnswer: {
                        '@type': 'Answer',
                        text: t('faq1Answer')
                    }
                },
                {
                    '@type': 'Question',
                    name: t('faq2Question'),
                    acceptedAnswer: {
                        '@type': 'Answer',
                        text: t('faq2Answer')
                    }
                }
            ]
        };
        faq.textContent = JSON.stringify(faqData, null, 2);
    }
}

function setLang(lang, options = {}) {
    const nextLang = translations[lang] ? lang : 'ko';
    currentLang = nextLang;
    document.documentElement.lang = nextLang;
    localStorage.setItem('preferredLang', nextLang);
    document.querySelectorAll('.lang-switch button').forEach((button) => {
        button.classList.toggle('active', button.dataset.lang === nextLang);
    });
    applyTranslations();
    showDailyQuote();

    if (options.updateUrl) {
        const url = new URL(window.location.href);
        url.searchParams.set('lang', nextLang);
        window.history.replaceState({}, '', url);
    }
}

function detectLang() {
    const params = new URLSearchParams(window.location.search);
    const paramLang = params.get('lang');
    if (translations[paramLang]) return paramLang;
    const stored = localStorage.getItem('preferredLang');
    if (translations[stored]) return stored;
    const browser = navigator.language?.toLowerCase() || '';
    return browser.startsWith('en') ? 'en' : 'ko';
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ í˜„ì¬ ë‚ ì§œë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.lang-switch button').forEach((button) => {
        button.addEventListener('click', () => {
            setLang(button.dataset.lang, { updateUrl: true });
        });
    });
    setLang(detectLang(), { updateUrl: false });

    const today = new Date();
    const todayString = formatDateForInput(today);
    
    // ëª©í‘œ ë‚ ì§œ ì…ë ¥ë€ì— ì˜¤ëŠ˜ ë‚ ì§œ ì„¤ì •
    const targetDateInput = document.getElementById('targetDate');
    if (targetDateInput) {
        targetDateInput.value = todayString;
    }
    
    // ì‹œì‘ ë‚ ì§œ ì…ë ¥ë€ì— ì˜¤ëŠ˜ ë‚ ì§œ ì„¤ì •
    const startDateInput = document.getElementById('startDate');
    if (startDateInput) {
        startDateInput.value = todayString;
    }
    
    // ìœ„ì ¯ ë‚ ì§œë„ ì˜¤ëŠ˜ë¡œ ì„¤ì •
    const widgetDateInput = document.getElementById('widgetDate');
    if (widgetDateInput) {
        widgetDateInput.value = todayString;
    }
    
    // í…Œë§ˆ ì´ˆê¸°í™”
    initTheme();
    
    // ì•Œë¦¼ ê¶Œí•œ ìš”ì²­
    requestNotificationPermission();
    
    // ì €ì¥ëœ ë©”ëª¨ ë¶ˆëŸ¬ì˜¤ê¸°
    loadMemos();
});

// ë‚ ì§œë¥¼ input[type="date"] í˜•ì‹ìœ¼ë¡œ ë³€í™˜ (YYYY-MM-DD)
function formatDateForInput(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const day = String(date.getDate()).padStart(2, '0');
    return `${year}-${month}-${day}`;
}

// ë‚ ì§œë¥¼ í˜„ì¬ ì–¸ì–´ì— ë§ê²Œ í¬ë§·íŒ…
function formatDateLocalized(date) {
    const locale = currentLang === 'en' ? 'en-US' : 'ko-KR';
    const options = {
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        weekday: 'short'
    };
    return new Intl.DateTimeFormat(locale, options).format(date);
}

// ìƒì„¸ ì‹œê°„ ê³„ì‚° (ì¼, ì‹œê°„, ë¶„, ì´ˆ)
function calculateDetailedTime(targetDate) {
    const now = new Date();
    const diff = targetDate - now;
    
    if (diff <= 0) {
        return { days: 0, hours: 0, minutes: 0, seconds: 0, total: 0 };
    }
    
    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((diff % (1000 * 60)) / 1000);
    
    return { days, hours, minutes, seconds, total: diff };
}

// D-day ê³„ì‚° í•¨ìˆ˜ (ì• ë‹ˆë©”ì´ì…˜ í¬í•¨)
function calculateDday() {
    const targetDateInput = document.getElementById('targetDate');
    const resultBox = document.getElementById('ddayResult');
    
    if (!targetDateInput.value) {
        alert(t('alertSelectTarget'));
        targetDateInput.focus();
        return;
    }
    
    const targetDate = new Date(targetDateInput.value + 'T00:00:00');
    
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    const diffTime = targetDate - today;
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    const detailedTime = calculateDetailedTime(targetDate);
    
    let resultHTML = '';
    
    if (diffDays === 0) {
        resultHTML = `
            <h3>${t('ddayTodayTitle')}</h3>
            <div class="dday-number animate-count" style="color: var(--secondary-color);">D-day</div>
            <p class="dday-text">${t('ddayTodayText')}</p>
        `;
    } else if (diffDays > 0) {
        resultHTML = `
            <h3>${t('ddayTargetTitle')}</h3>
            <div class="dday-number animate-count">D-<span id="countNumber" class="number-animate">${diffDays}</span></div>
            <p class="dday-text">${t('ddayUntilText', { date: formatDateLocalized(targetDate) })}</p>
            <div class="detailed-time">
                <div class="time-item">
                    <span class="time-value number-animate" id="daysValue">${detailedTime.days}</span>
                    <span class="time-label">${t('unitDay')}</span>
                </div>
                <div class="time-item">
                    <span class="time-value number-animate" id="hoursValue">${detailedTime.hours}</span>
                    <span class="time-label">${t('unitHour')}</span>
                </div>
                <div class="time-item">
                    <span class="time-value number-animate" id="minutesValue">${detailedTime.minutes}</span>
                    <span class="time-label">${t('unitMinute')}</span>
                </div>
                <div class="time-item">
                    <span class="time-value number-animate" id="secondsValue">${detailedTime.seconds}</span>
                    <span class="time-label">${t('unitSecond')}</span>
                </div>
            </div>
        `;
    } else {
        const pastDays = Math.abs(diffDays);
        resultHTML = `
            <h3>${t('ddayTargetTitle')}</h3>
            <div class="dday-number animate-count" style="color: var(--danger-color);">D+${pastDays}</div>
            <p class="dday-text">${t('ddayPastText', { date: formatDateLocalized(targetDate), days: pastDays })}</p>
        `;
    }
    
    // ê³µìœ  ë²„íŠ¼ ì¶”ê°€
    resultHTML += `
        <div class="share-buttons">
            <button class="btn btn-secondary share-btn" onclick="shareToKakao('${targetDateInput.value}', ${diffDays})">
                ${t('shareKakaoBtn')}
            </button>
            <button class="btn btn-secondary share-btn" onclick="shareToInstagram('${targetDateInput.value}', ${diffDays})">
                ${t('shareInstagramBtn')}
            </button>
            <button class="btn btn-secondary share-btn" onclick="copyShareImage('${targetDateInput.value}', ${diffDays})">
                ${t('shareCopyBtn')}
            </button>
        </div>
    `;
    
    resultBox.innerHTML = resultHTML;
    resultBox.classList.add('show');
    
    // ì¹´ìš´íŠ¸ ì• ë‹ˆë©”ì´ì…˜
    if (diffDays > 0) {
        animateCount('countNumber', 0, diffDays);
        animateCount('daysValue', 0, detailedTime.days);
        animateCount('hoursValue', 0, detailedTime.hours);
        animateCount('minutesValue', 0, detailedTime.minutes);
        animateCount('secondsValue', 0, detailedTime.seconds);
        
        // ì‹¤ì‹œê°„ ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œì‘
        startCountdown(targetDate, resultBox);
    }
    
    // ì•Œë¦¼ ì„¤ì •
    if (diffDays > 0) {
        scheduleNotifications(targetDate, diffDays);
    }
}

// ì‹¤ì‹œê°„ ì¹´ìš´íŠ¸ë‹¤ìš´
let countdownInterval = null;

function startCountdown(targetDate, resultBox) {
    // ê¸°ì¡´ ì¸í„°ë²Œ ì •ë¦¬
    if (countdownInterval) {
        clearInterval(countdownInterval);
    }
    
    countdownInterval = setInterval(() => {
        const detailedTime = calculateDetailedTime(targetDate);
        
        if (detailedTime.total <= 0) {
            clearInterval(countdownInterval);
            resultBox.innerHTML = `
                <h3>${t('ddayArrivedTitle')}</h3>
                <div class="dday-number" style="color: var(--secondary-color);">D-day</div>
                <p class="dday-text">${t('ddayArrivedText')}</p>
            `;
            return;
        }
        
        // ìˆ«ì ì—…ë°ì´íŠ¸ (ì• ë‹ˆë©”ì´ì…˜ê³¼ í•¨ê»˜)
        updateAnimatedNumber('daysValue', detailedTime.days);
        updateAnimatedNumber('hoursValue', detailedTime.hours);
        updateAnimatedNumber('minutesValue', detailedTime.minutes);
        updateAnimatedNumber('secondsValue', detailedTime.seconds);
        
        // D-day ìˆ«ìë„ ì—…ë°ì´íŠ¸
        const diffDays = Math.ceil(detailedTime.total / (1000 * 60 * 60 * 24));
        const countElement = document.getElementById('countNumber');
        if (countElement) {
            const currentValue = parseInt(countElement.textContent) || 0;
            if (currentValue !== diffDays) {
                animateCount('countNumber', currentValue, diffDays);
            }
        }
    }, 1000);
}

// ì• ë‹ˆë©”ì´ì…˜ê³¼ í•¨ê»˜ ìˆ«ì ì—…ë°ì´íŠ¸
function updateAnimatedNumber(elementId, newValue) {
    const element = document.getElementById(elementId);
    if (!element) return;
    
    const currentValue = parseInt(element.textContent) || 0;
    if (currentValue !== newValue) {
        // ì‘ì€ ë³€í™”ëŠ” ë°”ë¡œ ì—…ë°ì´íŠ¸, í° ë³€í™”ëŠ” ì• ë‹ˆë©”ì´ì…˜
        if (Math.abs(currentValue - newValue) > 10) {
            animateCount(elementId, currentValue, newValue);
        } else {
            // ì‘ì€ ë³€í™”ëŠ” ë¶€ë“œëŸ½ê²Œ
            element.textContent = newValue;
            element.classList.add('number-pulse');
            setTimeout(() => {
                element.classList.remove('number-pulse');
            }, 300);
        }
    }
}

// ì¹´ìš´íŠ¸ ì• ë‹ˆë©”ì´ì…˜ (ì¬ë°Œê²Œ!)
function animateCount(elementId, start, end) {
    const element = document.getElementById(elementId);
    if (!element) return;
    
    // ì´ë¯¸ ì• ë‹ˆë©”ì´ì…˜ ì¤‘ì´ë©´ ì¤‘ë‹¨
    if (element.dataset.animating === 'true') {
        return;
    }
    
    element.dataset.animating = 'true';
    element.classList.add('number-rolling');
    
    const duration = 800;
    const startTime = performance.now();
    const range = end - start;
    
    function update(currentTime) {
        const elapsed = currentTime - startTime;
        const progress = Math.min(elapsed / duration, 1);
        
        // ì´ì§• í•¨ìˆ˜ (easeOutCubic)
        const easeProgress = 1 - Math.pow(1 - progress, 3);
        const current = Math.floor(start + range * easeProgress);
        
        element.textContent = current;
        
        if (progress < 1) {
            requestAnimationFrame(update);
        } else {
            element.textContent = end;
            element.dataset.animating = 'false';
            element.classList.remove('number-rolling');
        }
    }
    
    requestAnimationFrame(update);
}

// ì—­ê³„ì‚° í•¨ìˆ˜ (Nì¼ í›„ëŠ” ì–¸ì œì¸ì§€)
function calculateFutureDate() {
    const daysInput = document.getElementById('daysInput');
    const startDateInput = document.getElementById('startDate');
    const resultBox = document.getElementById('futureDateResult');
    
    if (!daysInput.value || parseInt(daysInput.value) <= 0) {
        alert(t('alertInvalidDays'));
        daysInput.focus();
        return;
    }
    
    const days = parseInt(daysInput.value);
    let startDate;
    
    if (startDateInput.value) {
        startDate = new Date(startDateInput.value + 'T00:00:00');
    } else {
        startDate = new Date();
        startDate.setHours(0, 0, 0, 0);
    }
    
    const futureDate = new Date(startDate);
    futureDate.setDate(futureDate.getDate() + days);
    
    const startDateString = formatDateForInput(startDate);
    const futureDateString = formatDateForInput(futureDate);
    
    const periodLabel = t('futureResultTitle', { days });
    resultBox.innerHTML = `
        <h3>${periodLabel}</h3>
        <div class="dday-number animate-count" style="color: var(--secondary-color);">${formatDateLocalized(futureDate)}</div>
        <p class="dday-text">${t('futureResultText', { startDate: formatDateLocalized(startDate), days, futureDate: formatDateLocalized(futureDate) })}</p>
        <div class="share-buttons">
            <button class="btn btn-secondary share-btn" onclick="shareToKakao('${futureDateString}', ${days}, '${startDateString}', '${periodLabel}')">
                ${t('shareKakaoBtn')}
            </button>
            <button class="btn btn-secondary share-btn" onclick="shareToInstagram('${futureDateString}', ${days}, '${startDateString}', '${periodLabel}')">
                ${t('shareInstagramBtn')}
            </button>
            <button class="btn btn-secondary share-btn" onclick="copyShareImage('${futureDateString}', ${days}, '${startDateString}', '${periodLabel}')">
                ${t('shareCopyBtn')}
            </button>
        </div>
    `;
    resultBox.classList.add('show');
}

// ë¹ ë¥¸ ê³„ì‚° í•¨ìˆ˜
function quickCalculate(days) {
    const startDateInput = document.getElementById('startDate');
    const resultBox = document.getElementById('quickResult');
    
    let startDate;
    if (startDateInput.value) {
        startDate = new Date(startDateInput.value + 'T00:00:00');
    } else {
        startDate = new Date();
        startDate.setHours(0, 0, 0, 0);
    }
    
    const futureDate = new Date(startDate);
    futureDate.setDate(futureDate.getDate() + days);
    
    let periodText = '';
    if (days === 50) periodText = t('quick50');
    else if (days === 100) periodText = t('quick100');
    else if (days === 200) periodText = t('quick200');
    else if (days === 300) periodText = t('quick300');
    
    resultBox.innerHTML = `
        <h3>${t('quickResultTitle', { period: periodText })}</h3>
        <div class="dday-number animate-count" style="color: var(--secondary-color);">${formatDateLocalized(futureDate)}</div>
        <p class="dday-text">${t('futureResultText', { startDate: formatDateLocalized(startDate), days, futureDate: formatDateLocalized(futureDate) })}</p>
    `;
    resultBox.classList.add('show');
    
    // ì‹œì‘ ë‚ ì§œ ì…ë ¥ë€ì— ê²°ê³¼ ë‚ ì§œ ìë™ ì…ë ¥
    document.getElementById('startDate').value = formatDateForInput(futureDate);
}

// ë©”ëª¨ ì €ì¥
function saveMemo() {
    const memoText = document.getElementById('memoText').value.trim();
    if (!memoText) {
        alert(t('alertMemoEmpty'));
        return;
    }
    
    const memos = getMemos();
    const memo = {
        id: Date.now().toString(),
        text: memoText,
        date: new Date().toISOString(),
        dateString: formatDateLocalized(new Date())
    };
    
    memos.push(memo);
    localStorage.setItem('ddayMemos', JSON.stringify(memos));
    
    document.getElementById('memoText').value = '';
    loadMemos();
    alert(t('alertMemoSaved'));
}

// ë©”ëª¨ ë¶ˆëŸ¬ì˜¤ê¸°
function getMemos() {
    const saved = localStorage.getItem('ddayMemos');
    return saved ? JSON.parse(saved) : [];
}

// ì €ì¥ëœ ë©”ëª¨ í‘œì‹œ
function loadMemos() {
    const memos = getMemos();
    const listContainer = document.getElementById('memosList');
    
    if (memos.length === 0) {
        listContainer.innerHTML = `<p style="text-align: center; color: #999; padding: 20px;">${t('alertMemoEmptyList')}</p>`;
        return;
    }
    
    // ìµœì‹ ìˆœìœ¼ë¡œ ì •ë ¬
    memos.sort((a, b) => new Date(b.date) - new Date(a.date));
    
    listContainer.innerHTML = memos.map(memo => `
        <div class="memo-item">
            <div class="memo-date">${memo.dateString}</div>
            <div class="memo-text">${memo.text}</div>
            <div class="memo-actions-inline">
                <button class="btn btn-secondary share-btn" onclick="shareMemoToKakao('${memo.id}')" style="margin-top: 10px; padding: 5px 10px; font-size: 0.9em; flex: 1;">
                    ${t('memoShareKakao')}
                </button>
                <button class="btn btn-secondary share-btn" onclick="shareMemoToInstagram('${memo.id}')" style="margin-top: 10px; padding: 5px 10px; font-size: 0.9em; flex: 1;">
                    ${t('memoShareInsta')}
                </button>
                <button class="btn btn-secondary share-btn" onclick="copyMemoImage('${memo.id}')" style="margin-top: 10px; padding: 5px 10px; font-size: 0.9em; flex: 1;">
                    ${t('memoShareCopy')}
                </button>
                <button class="btn btn-danger" onclick="deleteMemo('${memo.id}')" style="margin-top: 10px; padding: 5px 10px; font-size: 0.9em; flex: 1;">${t('memoDelete')}</button>
            </div>
        </div>
    `).join('');
}

// ë©”ëª¨ ì‚­ì œ
function deleteMemo(id) {
    if (!confirm(t('alertMemoDeleteConfirm'))) return;
    
    const memos = getMemos();
    const filtered = memos.filter(m => m.id !== id);
    localStorage.setItem('ddayMemos', JSON.stringify(filtered));
    loadMemos();
}

// ìœ„ì ¯ ì½”ë“œ ìƒì„±
function generateWidget() {
    const widgetDate = document.getElementById('widgetDate').value;
    const widgetTitle = document.getElementById('widgetTitle').value || t('shareTitleDefault');
    
    if (!widgetDate) {
        alert(t('alertSelectDate'));
        return;
    }
    
    const targetDate = new Date(widgetDate + 'T00:00:00');
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    const diffTime = targetDate - today;
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    
    const widgetCode = `
<iframe src="https://funnyfunny.cloud/widget.html?date=${widgetDate}&title=${encodeURIComponent(widgetTitle)}" 
        width="300" 
        height="150" 
        frameborder="0" 
        scrolling="no">
</iframe>
    `.trim();
    
    const resultBox = document.getElementById('widgetResult');
    resultBox.innerHTML = `
        <div class="widget-preview">
            <h4>${t('widgetPreviewTitle')}</h4>
            <div style="border: 2px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 8px; background: #f9f9f9;">
                <strong>${widgetTitle}</strong><br>
                ${t('widgetPreviewLabel', { title: formatDateLocalized(targetDate) })}<br>
                <span style="font-size: 1.5em; color: var(--primary-color); font-weight: bold;">D-${diffDays}</span>
            </div>
        </div>
        <div class="widget-code">
            <h4>${t('widgetCodeTitle')}</h4>
            <textarea readonly style="width: 100%; min-height: 100px; padding: 10px; font-family: monospace; border: 1px solid #ddd; border-radius: 5px;">${widgetCode}</textarea>
            <button class="btn btn-secondary" onclick="copyWidgetCode()" style="margin-top: 10px;">${t('widgetCopyBtn')}</button>
        </div>
    `;
    resultBox.classList.add('show');
    
    // ì „ì—­ ë³€ìˆ˜ì— ì €ì¥
    window.widgetCodeToCopy = widgetCode;
}

// ìœ„ì ¯ ì½”ë“œ ë³µì‚¬
function copyWidgetCode() {
    if (window.widgetCodeToCopy) {
        navigator.clipboard.writeText(window.widgetCodeToCopy).then(() => {
            alert(t('alertWidgetCopied'));
        });
    }
}

// ì¹´ì¹´ì˜¤í†¡ ê³µìœ 
function shareToKakao(dateString, days, startDateString = null, title = t('shareTitleDefault')) {
    // í˜„ì¬ í™”ë©´ì˜ ì‹¤ì œ ê°’ ê°€ì ¸ì˜¤ê¸°
    let actualDays = days;
    if (!startDateString) {
        const countElement = document.getElementById('countNumber');
        if (countElement) {
            actualDays = parseInt(countElement.textContent) || days;
        }
    }
    
    // Web Share API ì‚¬ìš© (ëª¨ë°”ì¼ì—ì„œ ì‘ë™)
    if (navigator.share) {
        const shareData = {
            title: `${title} - ${t('shareKakaoTitle')}`,
            text: startDateString 
                ? t('shareKakaoFutureText', {
                    startDate: formatDateLocalized(new Date(startDateString + 'T00:00:00')),
                    days,
                    futureDate: formatDateLocalized(new Date(dateString + 'T00:00:00'))
                })
                : t('shareKakaoText', {
                    date: formatDateLocalized(new Date(dateString + 'T00:00:00')),
                    days: actualDays
                }),
            url: window.location.href
        };
        
        navigator.share(shareData).catch(err => {
            console.log('ê³µìœ  ì‹¤íŒ¨:', err);
            // ì‹¤íŒ¨ ì‹œ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
            const shareImage = generateShareImage(dateString, actualDays, startDateString, title);
            downloadImage(shareImage, `dday-${dateString}.png`);
            alert(t('alertShareImageDownload'));
        });
    } else {
        // Web Share APIë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ê²½ìš° ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
        const shareImage = generateShareImage(dateString, actualDays, startDateString, title);
        downloadImage(shareImage, `dday-${dateString}.png`);
        alert(t('alertShareImageDownload'));
    }
}

// ì¸ìŠ¤íƒ€ê·¸ë¨ ê³µìœ 
function shareToInstagram(dateString, days, startDateString = null, title = t('shareTitleDefault')) {
    try {
        // í˜„ì¬ í™”ë©´ì˜ ì‹¤ì œ ê°’ ê°€ì ¸ì˜¤ê¸°
        let actualDays = days;
        if (!startDateString) {
            const countElement = document.getElementById('countNumber');
            if (countElement) {
                actualDays = parseInt(countElement.textContent) || days;
            }
        }
        
        const shareImage = generateShareImage(dateString, actualDays, startDateString, title);
        if (!shareImage) {
            alert(t('alertImageGenerateFail'));
            return;
        }
        
        downloadImage(shareImage, `dday-${dateString}-${Date.now()}.png`);
        alert(t('alertImageDownloadInsta'));
    } catch (error) {
        console.error('ì¸ìŠ¤íƒ€ê·¸ë¨ ê³µìœ  ì˜¤ë¥˜:', error);
        alert(t('alertImageGenerateError'));
    }
}

// ì´ë¯¸ì§€ ë³µì‚¬
function copyShareImage(dateString, days, startDateString = null, title = t('shareTitleDefault')) {
    try {
        // í˜„ì¬ í™”ë©´ì˜ ì‹¤ì œ ê°’ ê°€ì ¸ì˜¤ê¸°
        let actualDays = days;
        if (!startDateString) {
            const countElement = document.getElementById('countNumber');
            if (countElement) {
                actualDays = parseInt(countElement.textContent) || days;
            }
        }
        
        const shareImage = generateShareImage(dateString, actualDays, startDateString, title);
        if (!shareImage) {
            alert(t('alertImageGenerateFail'));
            return;
        }
        
        // Clipboard API ì§€ì› í™•ì¸
        if (navigator.clipboard && navigator.clipboard.write) {
            shareImage.toBlob(blob => {
                if (!blob) {
                    downloadImage(shareImage, `dday-${dateString}-${Date.now()}.png`);
                    alert(t('alertImageDownload'));
                    return;
                }
                
                navigator.clipboard.write([
                    new ClipboardItem({ 'image/png': blob })
                ]).then(() => {
                    alert(t('alertImageCopySuccess'));
                }).catch(err => {
                    console.error('í´ë¦½ë³´ë“œ ë³µì‚¬ ì˜¤ë¥˜:', err);
                    // ì‹¤íŒ¨ ì‹œ ë‹¤ìš´ë¡œë“œë¡œ ëŒ€ì²´
                    downloadImage(shareImage, `dday-${dateString}-${Date.now()}.png`);
                    alert(t('alertImageCopyFail'));
                });
            }, 'image/png');
        } else {
            // Clipboard APIë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ê²½ìš° ë‹¤ìš´ë¡œë“œ
            downloadImage(shareImage, `dday-${dateString}-${Date.now()}.png`);
            alert(t('alertClipboardUnsupported'));
        }
    } catch (error) {
        console.error('ì´ë¯¸ì§€ ë³µì‚¬ ì˜¤ë¥˜:', error);
        alert(t('alertImageCopyError'));
    }
}

// ê³µìœ  ì´ë¯¸ì§€ ìƒì„±
function generateShareImage(dateString, days, startDateString = null, title = t('shareTitleDefault'), memoText = null) {
    const canvas = document.getElementById('shareCanvas');
    if (!canvas) {
            console.error('shareCanvasë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            return null;
        }
    
    const ctx = canvas.getContext('2d');
    if (!ctx) {
            console.error('Canvas contextë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            return null;
        }
    
    // ì¹´ìš´íŠ¸ë‹¤ìš´ ì¤‘ì§€ (ì €ì¥ ì‹œ ì •ì§€ëœ ìƒíƒœ)
    if (countdownInterval) {
        clearInterval(countdownInterval);
        countdownInterval = null;
    }
    
    // í˜„ì¬ í™”ë©´ì˜ ì‹¤ì œ ê°’ ê°€ì ¸ì˜¤ê¸° (ì• ë‹ˆë©”ì´ì…˜ ì¤‘ì´ ì•„ë‹Œ ì •ì§€ëœ ê°’)
    let actualDays = days;
    let actualTime = { days: 0, hours: 0, minutes: 0, seconds: 0 };
    
    if (!memoText && !startDateString) {
        // D-day ê³„ì‚°ì¸ ê²½ìš°
        const daysElement = document.getElementById('daysValue');
        const hoursElement = document.getElementById('hoursValue');
        const minutesElement = document.getElementById('minutesValue');
        const secondsElement = document.getElementById('secondsValue');
        
        if (daysElement) actualTime.days = parseInt(daysElement.textContent) || 0;
        if (hoursElement) actualTime.hours = parseInt(hoursElement.textContent) || 0;
        if (minutesElement) actualTime.minutes = parseInt(minutesElement.textContent) || 0;
        if (secondsElement) actualTime.seconds = parseInt(secondsElement.textContent) || 0;
        
        const countElement = document.getElementById('countNumber');
        if (countElement) {
            actualDays = parseInt(countElement.textContent) || days;
        }
    }
    
    canvas.width = 1200;
    canvas.height = 630;
    
    // ë°°ê²½ ê·¸ë¼ë°ì´ì…˜
    const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
    gradient.addColorStop(0, '#667eea');
    gradient.addColorStop(1, '#764ba2');
    ctx.fillStyle = gradient;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    // í…ìŠ¤íŠ¸
    ctx.fillStyle = 'white';
    ctx.textAlign = 'center';
    
    if (memoText) {
        // ë©”ëª¨ ê³µìœ  ì´ë¯¸ì§€ - ê°ì„±ì ì¸ ë””ìì¸
        // ë‚ ì§œì™€ ë©”ëª¨ í…ìŠ¤íŠ¸ ë¶„ë¦¬
        const memoLines = memoText.split('\n');
        let dateString = '';
        let memoContent = '';
        
        // ì²« ë²ˆì§¸ ì¤„ì´ ë‚ ì§œ í˜•ì‹ì¸ì§€ í™•ì¸ (ì˜ˆ: "2024ë…„ 12ì›” 19ì¼ (ëª©)")
        if (memoLines.length > 0 && memoLines[0].includes('ë…„') && memoLines[0].includes('ì›”')) {
            dateString = memoLines[0];
            memoContent = memoLines.slice(1).join('\n').trim();
        } else {
            // ë‚ ì§œê°€ ì—†ìœ¼ë©´ ë©”ëª¨ ì „ì²´ë¥¼ ë‚´ìš©ìœ¼ë¡œ
            memoContent = memoText;
        }
        
        // ë‚ ì§œ í‘œì‹œ (ìˆì„ ê²½ìš°)
        if (dateString) {
            ctx.font = '48px Arial';
            ctx.fillText(dateString, canvas.width / 2, 200);
        }
        
        // ë©”ëª¨ ë‚´ìš© í‘œì‹œ (ë‚ ì§œ ì•„ë˜)
        ctx.font = '44px Arial';
        const lines = wrapText(ctx, memoContent || memoText, canvas.width - 200);
        let y = dateString ? 320 : 280;
        lines.forEach(line => {
            ctx.fillText(line, canvas.width / 2, y);
            y += 70;
        });
    } else if (startDateString) {
        // Nì¼ í›„ ê³„ì‚° ì´ë¯¸ì§€
        ctx.font = 'bold 64px Arial';
        ctx.fillText(t('futureResultTitle', { days }), canvas.width / 2, 180);
        
        ctx.font = '48px Arial';
        const startDate = new Date(startDateString + 'T00:00:00');
        ctx.fillText(formatDateLocalized(startDate), canvas.width / 2, 280);
        
        ctx.font = 'bold 56px Arial';
        ctx.fillText('â†“', canvas.width / 2, 360);
        
        ctx.font = '48px Arial';
        const futureDate = new Date(dateString + 'T00:00:00');
        ctx.fillText(formatDateLocalized(futureDate), canvas.width / 2, 450);
    } else {
        // D-day ê³„ì‚° ì´ë¯¸ì§€ (ì €ì¥ ì‹œ ì •ì§€ëœ ê°’ ì‚¬ìš©) - ê°ì„±ì ì¸ ë””ìì¸
        ctx.font = 'bold 120px Arial';
        ctx.fillText('D-' + actualDays, canvas.width / 2, 280);
        
        ctx.font = '48px Arial';
        const targetDate = new Date(dateString + 'T00:00:00');
        ctx.fillText(formatDateLocalized(targetDate), canvas.width / 2, 380);
    }
    
    return canvas;
}

// í…ìŠ¤íŠ¸ ì¤„ë°”ê¿ˆ í•¨ìˆ˜
function wrapText(ctx, text, maxWidth) {
    const words = text.split(' ');
    const lines = [];
    let currentLine = words[0];
    
    for (let i = 1; i < words.length; i++) {
        const word = words[i];
        const width = ctx.measureText(currentLine + ' ' + word).width;
        if (width < maxWidth) {
            currentLine += ' ' + word;
        } else {
            lines.push(currentLine);
            currentLine = word;
        }
    }
    lines.push(currentLine);
    return lines;
}

// ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
function downloadImage(canvas, filename) {
    try {
        if (!canvas) {
            console.error('Canvasê°€ ì—†ìŠµë‹ˆë‹¤.');
            return;
        }
        
        const dataURL = canvas.toDataURL('image/png');
        if (!dataURL || dataURL === 'data:,') {
            console.error('ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            alert(t('alertImageDataFail'));
            return;
        }
        
        const link = document.createElement('a');
        link.download = filename;
        link.href = dataURL;
        link.style.display = 'none';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    } catch (error) {
        console.error('ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì˜¤ë¥˜:', error);
        alert(t('alertImageDownloadError'));
    }
}

// ë©”ëª¨ ì¹´ì¹´ì˜¤í†¡ ê³µìœ 
function shareMemoToKakao(memoId) {
    const memos = getMemos();
    const memo = memos.find(m => m.id === memoId);
    if (!memo) return;
    
    if (navigator.share) {
        const shareData = {
            title: t('shareMemoTitle'),
            text: `${memo.dateString}\n${memo.text}`,
            url: window.location.href
        };
        
        navigator.share(shareData).catch(err => {
            console.log('ê³µìœ  ì‹¤íŒ¨:', err);
            const shareImage = generateShareImage(null, null, null, t('shareMemoTitle'), `${memo.dateString}\n${memo.text}`);
            downloadImage(shareImage, `memo-${memoId}.png`);
            alert(t('alertShareImageDownload'));
        });
    } else {
        const shareImage = generateShareImage(null, null, null, t('shareMemoTitle'), `${memo.dateString}\n${memo.text}`);
        downloadImage(shareImage, `memo-${memoId}.png`);
        alert(t('alertShareImageDownload'));
    }
}

// ë©”ëª¨ ì¸ìŠ¤íƒ€ê·¸ë¨ ê³µìœ 
function shareMemoToInstagram(memoId) {
    const memos = getMemos();
    const memo = memos.find(m => m.id === memoId);
    if (!memo) return;
    
    const shareImage = generateShareImage(null, null, null, t('shareMemoTitle'), `${memo.dateString}\n${memo.text}`);
    downloadImage(shareImage, `memo-${memoId}.png`);
    alert(t('alertImageDownloadInsta'));
}

// ë©”ëª¨ ì´ë¯¸ì§€ ë³µì‚¬
function copyMemoImage(memoId) {
    const memos = getMemos();
    const memo = memos.find(m => m.id === memoId);
    if (!memo) return;
    
    const shareImage = generateShareImage(null, null, null, t('shareMemoTitle'), `${memo.dateString}\n${memo.text}`);
    shareImage.toBlob(blob => {
        navigator.clipboard.write([
            new ClipboardItem({ 'image/png': blob })
        ]).then(() => {
            alert(t('alertImageCopySuccess'));
        }).catch(() => {
            downloadImage(shareImage, `memo-${memoId}.png`);
            alert(t('alertImageDownload'));
        });
    });
}

// ì•Œë¦¼ ê¶Œí•œ ìš”ì²­
function requestNotificationPermission() {
    if ('Notification' in window && Notification.permission === 'default') {
        Notification.requestPermission();
    }
}

// ì•Œë¦¼ ìŠ¤ì¼€ì¤„ë§
function scheduleNotifications(targetDate, days) {
    if (!('Notification' in window) || Notification.permission !== 'granted') {
        return;
    }
    
    const notifications = localStorage.getItem('ddayNotifications') ? JSON.parse(localStorage.getItem('ddayNotifications')) : {};
    const dateKey = formatDateForInput(targetDate);
    
    // ê¸°ì¡´ ì•Œë¦¼ ì œê±°
    if (notifications[dateKey]) {
        notifications[dateKey].forEach(id => clearTimeout(id));
    }
    
    const timeouts = [];
    
    // 100ì¼ ì „ ì•Œë¦¼
    if (days > 100) {
        const daysUntil100 = days - 100;
        const timeout100 = setTimeout(() => {
            new Notification(t('notificationTitle'), {
                body: t('notification100', { date: formatDateLocalized(targetDate) }),
                icon: '/favicon.svg'
            });
        }, daysUntil100 * 24 * 60 * 60 * 1000);
        timeouts.push(timeout100);
    }
    
    // 30ì¼ ì „ ì•Œë¦¼
    if (days > 30) {
        const daysUntil30 = days - 30;
        const timeout30 = setTimeout(() => {
            new Notification(t('notificationTitle'), {
                body: t('notification30', { date: formatDateLocalized(targetDate) }),
                icon: '/favicon.svg'
            });
        }, daysUntil30 * 24 * 60 * 60 * 1000);
        timeouts.push(timeout30);
    }
    
    // 7ì¼ ì „ ì•Œë¦¼
    if (days > 7) {
        const daysUntil7 = days - 7;
        const timeout7 = setTimeout(() => {
            new Notification(t('notificationTitle'), {
                body: t('notification7', { date: formatDateLocalized(targetDate) }),
                icon: '/favicon.svg'
            });
        }, daysUntil7 * 24 * 60 * 60 * 1000);
        timeouts.push(timeout7);
    }
    
    notifications[dateKey] = timeouts;
    localStorage.setItem('ddayNotifications', JSON.stringify(notifications));
}

// ì˜¤ëŠ˜ì˜ ê¸°ë…ì¼ ì¶”ì²œ
function showDailyQuote() {
    const quotes = t('dailyQuotes');
    const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
    const quoteElement = document.getElementById('dailyQuote');
    if (quoteElement) {
        quoteElement.textContent = randomQuote;
    }
}

// í…Œë§ˆ ì´ˆê¸°í™”
function initTheme() {
    const savedTheme = localStorage.getItem('ddayTheme') || 'purple';
    setTheme(savedTheme);
    
    // í…Œë§ˆ ë²„íŠ¼ ì´ë²¤íŠ¸
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const theme = btn.dataset.theme;
            setTheme(theme);
            localStorage.setItem('ddayTheme', theme);
        });
    });
}

// í…Œë§ˆ ì„¤ì •
function setTheme(theme) {
    const themes = {
        purple: { primary: '#667eea', secondary: '#764ba2' },
        blue: { primary: '#4a90e2', secondary: '#357abd' },
        green: { primary: '#50c878', secondary: '#45b869' },
        pink: { primary: '#ff6b9d', secondary: '#ff4d7a' },
        orange: { primary: '#ff8c42', secondary: '#ff6b1a' }
    };
    
    const selectedTheme = themes[theme] || themes.purple;
    document.documentElement.style.setProperty('--theme-primary', selectedTheme.primary);
    document.documentElement.style.setProperty('--theme-secondary', selectedTheme.secondary);
    
    // í—¤ë” ë°°ê²½ ì—…ë°ì´íŠ¸
    const header = document.querySelector('header');
    if (header) {
        header.style.background = `linear-gradient(135deg, ${selectedTheme.primary} 0%, ${selectedTheme.secondary} 100%)`;
    }
    
    // í™œì„± í…Œë§ˆ ë²„íŠ¼ í‘œì‹œ
    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.theme === theme);
    });
}

// Enter í‚¤ë¡œ ê³„ì‚°í•˜ê¸°
document.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        const target = e.target;
        if (target.id === 'targetDate') {
            calculateDday();
        } else if (target.id === 'daysInput' || target.id === 'startDate') {
            calculateFutureDate();
        }
    }
});
